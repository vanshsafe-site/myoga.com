<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Myoga - Daily Flow</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #16213e 100%);
      color: #fff;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 30%, rgba(0, 255, 229, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(138, 43, 226, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: -1;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
      padding: 20px 0;
    }

    .header h1 {
      font-size: 3rem;
      font-weight: 700;
      background: linear-gradient(135deg, #00ffe5 0%, #8a2be2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
      letter-spacing: -0.02em;
    }

    .header p {
      font-size: 1.1rem;
      color: #aaa;
      opacity: 0.8;
    }

    .progress-overview {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 30px;
      text-align: center;
    }

    .progress-ring {
      width: 120px;
      height: 120px;
      margin: 0 auto 20px;
      position: relative;
    }

    .progress-ring svg {
      width: 100%;
      height: 100%;
      transform: rotate(-90deg);
    }

    .progress-ring-bg {
      fill: none;
      stroke: rgba(255, 255, 255, 0.1);
      stroke-width: 8;
    }

    .progress-ring-fill {
      fill: none;
      stroke: url(#gradient);
      stroke-width: 8;
      stroke-linecap: round;
      transition: stroke-dasharray 0.5s ease;
    }

    .progress-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.5rem;
      font-weight: 700;
      color: #00ffe5;
    }

    .task-grid {
      display: grid;
      gap: 20px;
      margin-bottom: 40px;
    }

    .task-card {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 25px;
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .task-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 255, 229, 0.1);
      border-color: rgba(0, 255, 229, 0.3);
    }

    .task-card.completed {
      background: rgba(0, 255, 229, 0.05);
      border-color: rgba(0, 255, 229, 0.3);
    }

    .task-card.active {
      background: rgba(138, 43, 226, 0.1);
      border-color: rgba(138, 43, 226, 0.5);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 20px rgba(138, 43, 226, 0.3); }
      50% { box-shadow: 0 0 30px rgba(138, 43, 226, 0.5); }
    }

    .task-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 15px;
    }

    .task-info {
      flex: 1;
    }

    .task-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 5px;
      color: #fff;
    }

    .task-duration {
      font-size: 0.9rem;
      color: #aaa;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .checkbox-wrapper {
      position: relative;
    }

    .checkbox {
      appearance: none;
      width: 24px;
      height: 24px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .checkbox:checked {
      background: linear-gradient(135deg, #00ffe5, #8a2be2);
      border-color: transparent;
    }

    .checkbox:checked::after {
      content: '‚úì';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #000;
      font-weight: bold;
      font-size: 12px;
    }

    .timer-controls {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn-primary {
      background: linear-gradient(135deg, #00ffe5, #00b8cc);
      color: #000;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0, 255, 229, 0.3);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .timer-display {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 12px;
      padding: 15px;
      text-align: center;
      font-family: 'Courier New', monospace;
      position: relative;
    }

    .timer-time {
      font-size: 1.8rem;
      font-weight: 700;
      color: #00ffe5;
      margin-bottom: 5px;
    }

    .timer-status {
      font-size: 0.9rem;
      color: #aaa;
    }

    .timer-progress {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      background: linear-gradient(90deg, #00ffe5, #8a2be2);
      border-radius: 0 0 12px 12px;
      transition: width 1s linear;
    }

    .stats-bar {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 20px;
      text-align: center;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: #00ffe5;
      margin-bottom: 5px;
    }

    .stat-label {
      font-size: 0.9rem;
      color: #aaa;
    }

    .footer {
      text-align: center;
      padding: 30px 0;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      margin-top: 40px;
    }

    .footer p {
      color: #666;
      margin-bottom: 10px;
    }

    .reset-btn {
      background: rgba(255, 69, 58, 0.1);
      color: #ff453a;
      border: 1px solid rgba(255, 69, 58, 0.3);
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }

    .reset-btn:hover {
      background: rgba(255, 69, 58, 0.2);
      transform: translateY(-2px);
    }

    @media (max-width: 768px) {
      .header h1 {
        font-size: 2.5rem;
      }
      
      .container {
        padding: 15px;
      }
      
      .task-card {
        padding: 20px;
      }
      
      .timer-controls {
        flex-direction: column;
      }
    }

    .celebration {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1000;
    }

    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background: #00ffe5;
      animation: confetti-fall 3s linear forwards;
    }

    @keyframes confetti-fall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }
  </style>
  
  <script>
    // Sound control flag
    let soundsEnabled = true;

    function playSound(type) {
      if (!soundsEnabled) return;
      
      // Create audio context for different sound types
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      switch(type) {
        case 'start':
          oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
          break;
        case 'complete':
          oscillator.frequency.setValueAtTime(1000, audioContext.currentTime);
          break;
        case 'pause':
          oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
          break;
      }
      
      gainNode.gain.setValueAtTime(0.2, audioContext.currentTime); // Increased from 0.1 to 0.2 (200% volume)
      gainNode.gain.exponentialRampToValueAtTime(0.02, audioContext.currentTime + 0.5); // Also doubled the end value
      
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.5);
    }
  </script>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Myoga Daily Flow</h1>
      <p>Transform your day with mindful movement and breath</p>
      <a href="whatismyoga.html" class="btn btn-secondary" style="margin-top: 20px; display: inline-block;">What is Myoga?</a>
    </div>

    <div class="progress-overview">
      <div class="progress-ring">
        <svg>
          <defs>
            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:#00ffe5"/>
              <stop offset="100%" style="stop-color:#8a2be2"/>
            </linearGradient>
          </defs>
          <circle class="progress-ring-bg" cx="60" cy="60" r="50"/>
          <circle class="progress-ring-fill" cx="60" cy="60" r="50" id="progressCircle"/>
        </svg>
        <div class="progress-text" id="progressText">0%</div>
      </div>
      <h3>Today's Progress</h3>
    </div>

    <div class="stats-bar">
      <div class="stat-card">
        <div class="stat-value" id="completedTasks">0</div>
        <div class="stat-label">Completed</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="totalTime">25</div>
        <div class="stat-label">Total Minutes</div>
      </div>
    </div>

    <div class="task-grid" id="taskGrid">
      <!-- Tasks will be populated by JavaScript -->
    </div>

    <div class="footer">
      <p>&copy; 2025 Myoga ‚Äî Created by Vansh Garg</p>
      <button class="reset-btn" onclick="resetDay()">Reset Today's Progress</button>
    </div>
  </div>

  <div class="celebration" id="celebration"></div>

  <script>
    const tasks = [
      { id: "mjDance", title: "MJ Choreography Warm-up", duration: 5, icon: "üï∫" },
      { id: "footSwitch", title: "Speed Foot Switches & Kicks", duration: 3, icon: "ü¶µ" },
      { id: "vajrasana", title: "Vajrasana Arm Flow", duration: 2, icon: "üßò‚Äç‚ôÇÔ∏è" },
      { id: "twistBreath", title: "Breath-Twist Head Movements", duration: 2, icon: "üå¨Ô∏è" },
      { id: "suryanamaskar", title: "10x Suryanamaskaar", duration: 8, icon: "‚òÄÔ∏è" },
      { id: "meditate", title: "Ujjayi Breathing + Meditation", duration: 5, icon: "üßò‚Äç‚ôÄÔ∏è" }
    ];

    let timers = {};
    let taskStates = {};
    let activeTimers = new Set();

    function initializeApp() {
      loadTaskStates();
      renderTasks();
      updateProgress();
      updateStats();
    }

    function renderTasks() {
      const taskGrid = document.getElementById('taskGrid');
      taskGrid.innerHTML = tasks.map(task => `
        <div class="task-card ${taskStates[task.id]?.completed ? 'completed' : ''}" id="card-${task.id}">
          <div class="task-header">
            <div class="task-info">
              <div class="task-title">${task.icon} ${task.title}</div>
              <div class="task-duration">‚è±Ô∏è ${task.duration} minutes</div>
            </div>
            <div class="checkbox-wrapper">
              <input type="checkbox" class="checkbox" id="${task.id}" 
                     ${taskStates[task.id]?.completed ? 'checked' : ''} 
                     onchange="toggleTask('${task.id}')">
            </div>
          </div>
          
          <div class="timer-controls">
            <button class="btn btn-primary" id="start-${task.id}" onclick="startTimer('${task.id}', ${task.duration})">
              Start Timer
            </button>
            <button class="btn btn-secondary" id="pause-${task.id}" onclick="pauseTimer('${task.id}')" style="display: none;">
              Pause
            </button>
            <button class="btn btn-secondary" id="reset-${task.id}" onclick="resetTimer('${task.id}')" style="display: none;">
              Reset
            </button>
          </div>
          
          <div class="timer-display" id="display-${task.id}" style="display: none;">
            <div class="timer-time" id="time-${task.id}">00:00</div>
            <div class="timer-status" id="status-${task.id}">Ready to start</div>
            <div class="timer-progress" id="progress-${task.id}"></div>
          </div>
        </div>
      `).join('');
    }

    function saveTaskStates() {
      const data = {
        states: taskStates,
        date: new Date().toDateString()
      };
      localStorage.setItem('myogaData', JSON.stringify(data));
    }

    function loadTaskStates() {
      try {
        const savedData = JSON.parse(localStorage.getItem('myogaData'));
        const today = new Date().toDateString();
        
        if (!savedData || savedData.date !== today) {
          taskStates = {};
          tasks.forEach(task => {
            taskStates[task.id] = { completed: false, timeSpent: 0 };
          });
        } else {
          taskStates = savedData.states || {};
        }
      } catch (error) {
        console.error('Error loading task states:', error);
        taskStates = {};
        tasks.forEach(task => {
          taskStates[task.id] = { completed: false, timeSpent: 0 };
        });
      }
    }

    function toggleTask(taskId) {
      const checkbox = document.getElementById(taskId);
      const card = document.getElementById(`card-${taskId}`);
      
      taskStates[taskId].completed = checkbox.checked;
      
      if (checkbox.checked) {
        card.classList.add('completed');
        if (timers[taskId]) {
          cancelAnimationFrame(timers[taskId]);
          delete timers[taskId];
          activeTimers.delete(taskId);
        }
        celebrate();
      } else {
        card.classList.remove('completed');
      }
      
      saveTaskStates();
      updateProgress();
      updateStats();
    }

    function startTimer(taskId, duration) {
      if (timers[taskId]) return;
      
      const card = document.getElementById(`card-${taskId}`);
      const display = document.getElementById(`display-${taskId}`);
      const timeDisplay = document.getElementById(`time-${taskId}`);
      const statusDisplay = document.getElementById(`status-${taskId}`);
      const progressBar = document.getElementById(`progress-${taskId}`);
      const startBtn = document.getElementById(`start-${taskId}`);
      const pauseBtn = document.getElementById(`pause-${taskId}`);
      const resetBtn = document.getElementById(`reset-${taskId}`);
      
      const totalTime = duration * 60;
      const startTime = Date.now();
      const endTime = startTime + (totalTime * 1000);
      
      card.classList.add('active');
      display.style.display = 'block';
      startBtn.style.display = 'none';
      pauseBtn.style.display = 'inline-block';
      resetBtn.style.display = 'inline-block';
      
      // Play start sound
      playSound('start');
      
      const updateTimer = () => {
        const now = Date.now();
        const timeLeft = Math.max(0, Math.ceil((endTime - now) / 1000));
        
        if (timeLeft === 0) {
          completeTimer(taskId);
          return;
        }
        
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        timeDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        
        const progress = ((totalTime - timeLeft) / totalTime) * 100;
        progressBar.style.width = `${progress}%`;
        statusDisplay.textContent = 'In progress...';
        
        // Request next frame
        timers[taskId] = requestAnimationFrame(updateTimer);
      };
      
      // Start the animation loop
      timers[taskId] = requestAnimationFrame(updateTimer);
      activeTimers.add(taskId);
    }

    function pauseTimer(taskId) {
      if (timers[taskId]) {
        cancelAnimationFrame(timers[taskId]);
        delete timers[taskId];
        activeTimers.delete(taskId);
        
        const card = document.getElementById(`card-${taskId}`);
        const statusDisplay = document.getElementById(`status-${taskId}`);
        const startBtn = document.getElementById(`start-${taskId}`);
        const pauseBtn = document.getElementById(`pause-${taskId}`);
        
        card.classList.remove('active');
        statusDisplay.textContent = 'Paused';
        startBtn.style.display = 'inline-block';
        startBtn.textContent = 'Resume';
        pauseBtn.style.display = 'none';

        // Play pause sound
        playSound('pause');
      }
    }

    function resetTimer(taskId) {
      if (timers[taskId]) {
        cancelAnimationFrame(timers[taskId]);
        delete timers[taskId];
        activeTimers.delete(taskId);
      }
      
      const card = document.getElementById(`card-${taskId}`);
      const display = document.getElementById(`display-${taskId}`);
      const startBtn = document.getElementById(`start-${taskId}`);
      const pauseBtn = document.getElementById(`pause-${taskId}`);
      const resetBtn = document.getElementById(`reset-${taskId}`);
      const progressBar = document.getElementById(`progress-${taskId}`);
      
      card.classList.remove('active');
      display.style.display = 'none';
      startBtn.style.display = 'inline-block';
      startBtn.textContent = 'Start Timer';
      pauseBtn.style.display = 'none';
      resetBtn.style.display = 'none';
      progressBar.style.width = '0%';
    }

    function completeTimer(taskId) {
      if (timers[taskId]) {
        cancelAnimationFrame(timers[taskId]);
        delete timers[taskId];
        activeTimers.delete(taskId);
      }
      
      const card = document.getElementById(`card-${taskId}`);
      const checkbox = document.getElementById(taskId);
      const statusDisplay = document.getElementById(`status-${taskId}`);
      const timeDisplay = document.getElementById(`time-${taskId}`);
      
      card.classList.remove('active');
      checkbox.checked = true;
      taskStates[taskId].completed = true;
      
      timeDisplay.textContent = '00:00';
      statusDisplay.textContent = '‚úÖ Completed!';
      
      // Play end sound
      playSound('complete');
      
      celebrate();
      saveTaskStates();
      updateProgress();
      updateStats();
      
      setTimeout(() => resetTimer(taskId), 3000);
    }

    function updateProgress() {
      const completed = Object.values(taskStates).filter(state => state.completed).length;
      const total = tasks.length;
      const percentage = Math.round((completed / total) * 100);
      
      const progressText = document.getElementById('progressText');
      const progressCircle = document.getElementById('progressCircle');
      
      progressText.textContent = `${percentage}%`;
      
      const circumference = 2 * Math.PI * 50;
      const offset = circumference - (percentage / 100) * circumference;
      
      progressCircle.style.strokeDasharray = circumference;
      progressCircle.style.strokeDashoffset = offset;
    }

    function updateStats() {
      const completed = Object.values(taskStates).filter(state => state.completed).length;
      document.getElementById('completedTasks').textContent = completed;
    }

    function celebrate() {
      const celebration = document.getElementById('celebration');
      const colors = ['#00ffe5', '#8a2be2', '#ff6b6b', '#4ecdc4', '#45b7d1'];
      
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDelay = Math.random() * 3 + 's';
        celebration.appendChild(confetti);
        
        setTimeout(() => confetti.remove(), 3000);
      }
    }

    function resetDay() {
      if (confirm('Are you sure you want to reset today\'s progress? This cannot be undone.')) {
        Object.keys(timers).forEach(taskId => {
          cancelAnimationFrame(timers[taskId]);
          delete timers[taskId];
        });
        activeTimers.clear();
        
        taskStates = {};
        tasks.forEach(task => {
          taskStates[task.id] = { completed: false, timeSpent: 0 };
        });
        
        saveTaskStates();
        renderTasks();
        updateProgress();
        updateStats();
      }
    }

    // Initialize the app when the page loads
    document.addEventListener('DOMContentLoaded', initializeApp);
  </script>
</body>
</html>